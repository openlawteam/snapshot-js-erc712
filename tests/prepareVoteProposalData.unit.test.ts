import Web3 from "web3";

import { DEFAULT_SIG } from "./utils";
import { prepareVoteProposalData } from "../index";

describe("prepareVoteProposalData unit tests", () => {
  test("should return correct data", () => {
    expect(
      prepareVoteProposalData(
        {
          submitter: "0x0000000000000000000000000000000000000000",
          payload: {
            body: "Cool",
            choices: ["Yes", "No"],
            end: 1622626958 + 120,
            name: "Some great proposal",
            snapshot: "50",
            start: 1622626958,
          },
          sig: DEFAULT_SIG,
          space: "tribute",
          // Not using the test util `DEFAULT_TIMESTAMP` as we need this to be deterministic
          timestamp: 1622626958,
        },
        new Web3("")
      )
    ).toBe(
      "0x0000000000000000000000000000000000000000000000000000000000000" +
        "0200000000000000000000000000000000000000000000000000000000060b75" +
        "28e9f3f3b08778f7e67091ae6263e03332fca03c910449d2c2eec3320e107a90" +
        "ad60000000000000000000000000000000000000000000000000000000000000" +
        "0000000000000000000000000000000000000000000000000000000000000000" +
        "0a00000000000000000000000000000000000000000000000000000000000000" +
        "280b790ff851b467c74c5cab0188e0650c9457a054f444dfc69c8745983615a4" +
        "8b5cdea34b764f963db811bfa880cc1b55b5b4ca04c6eb512abdd868f938b50a" +
        "6540000000000000000000000000000000000000000000000000000000000000" +
        "0c00000000000000000000000000000000000000000000000000000000060b75" +
        "28e0000000000000000000000000000000000000000000000000000000060b75" +
        "3060000000000000000000000000000000000000000000000000000000000000" +
        "1a00000000000000000000000000000000000000000000000000000000000000" +
        "0020000000000000000000000000000000000000000000000000000000000000" +
        "0400000000000000000000000000000000000000000000000000000000000000" +
        "0800000000000000000000000000000000000000000000000000000000000000" +
        "0035965730000000000000000000000000000000000000000000000000000000" +
        "0000000000000000000000000000000000000000000000000000000000000000" +
        "0024e6f000000000000000000000000000000000000000000000000000000000" +
        "0000000000000000000000000000000000000000000000000000000000000000" +
        "0023530000000000000000000000000000000000000000000000000000000000" +
        "0000000000000000000000000000000000000000000000000000000000000000" +
        "041767aab47ea6b8c204a773c1b6e1818b985802442cbed4c8bbc3b88962fff1" +
        "38e38e3c86635a36548feed3045a11ef4b25003074c750b1a67b9bb5b2b5997c" +
        "a971b00000000000000000000000000000000000000000000000000000000000000"
    );
  });
});
