import Web3 from "web3";

import { DEFAULT_SIG } from "./utils";
import { prepareVoteProposalData } from "../index";

describe("prepareVoteProposalData unit tests", () => {
  test("should return correct data", () => {
    expect(
      prepareVoteProposalData(
        {
          payload: {
            body: "Cool",
            choices: ["Yes", "No"],
            end: 1622626958 + 120,
            name: "Some great proposal",
            snapshot: "50",
            start: 1622626958,
          },
          sig: DEFAULT_SIG,
          space: "tribute",
          // Not using the test util `DEFAULT_TIMESTAMP` as we need this to be deterministic
          timestamp: 1622626958,
        },
        new Web3("")
      )
    ).toBe(
      "0x000000000000000000000000000000000000000000000000000000000000002000000000000000000" +
        "00000000000000000000000000000000000000060b7528e9f3f3b08778f7e67091ae6263e03332fca03c" +
        "910449d2c2eec3320e107a90ad6000000000000000000000000000000000000000000000000000000000" +
        "00000800000000000000000000000000000000000000000000000000000000000000260b790ff851b467" +
        "c74c5cab0188e0650c9457a054f444dfc69c8745983615a48b5cdea34b764f963db811bfa880cc1b55b5" +
        "b4ca04c6eb512abdd868f938b50a65400000000000000000000000000000000000000000000000000000" +
        "000000000c00000000000000000000000000000000000000000000000000000000060b7528e000000000" +
        "0000000000000000000000000000000000000000000000060b7530600000000000000000000000000000" +
        "000000000000000000000000000000001a00000000000000000000000000000000000000000000000000" +
        "000000000000002000000000000000000000000000000000000000000000000000000000000004000000" +
        "000000000000000000000000000000000000000000000000000000000800000000000000000000000000" +
        "000000000000000000000000000000000000003596573000000000000000000000000000000000000000" +
        "000000000000000000000000000000000000000000000000000000000000000000000000000000000024" +
        "e6f000000000000000000000000000000000000000000000000000000000000000000000000000000000" +
        "000000000000000000000000000000000000000000235300000000000000000000000000000000000000" +
        "000000000000000000000000000000000000000000000000000000000000000000000000000000000000" +
        "041767aab47ea6b8c204a773c1b6e1818b985802442cbed4c8bbc3b88962fff138e38e3c86635a36548f" +
        "eed3045a11ef4b25003074c750b1a67b9bb5b2b5997ca971b00000000000000000000000000000000000" +
        "000000000000000000000000000"
    );
  });
});
